<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--          -->
<!-- TEMPLATE -->
<!--          -->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="../../../template/advanced/template-advaced-admi.xhtml">

	<ui:define name="title-advaced">
			| Historial Presupuesto 
	</ui:define>

	<ui:define name="component-statu-advaced">
		<p:menuitem value="Home" url="../index.xhtml" />
		<p:menuitem value="Congiguración" url="setting.xhtml" disabled="none" />
	</ui:define>

	<ui:define name="component-title-img-advaced">
		<h:graphicImage library="img" name="all/budget.jpg"
			styleClass="sofia-image-80 sofia-image-dark" />
	</ui:define>
	<ui:define name="component-title-h1-advaced">#{app.app.getGlobal().getNombre()}</ui:define>
	<ui:define name="component-title-h2-advaced">Historial Presupuesto</ui:define>

	<!--         -->
	<!-- SECTION -->
	<!--         -->
	<ui:define name="component-other-advaced">
		<p:fieldset legend="Historial" toggleable="true" toggleSpeed="500">

			<!--        -->
			<!-- MESAGE -->
			<!--        -->
			<h:panelGroup layout="block">
				<p:staticMessage severity="warn" summary="" styleClass="p-p-3"
					detail="La siguiente información muestra todas las salidad y entradas de la empresa!" />

				<!--      -->
				<!-- LIST -->
				<!--      -->
				<p:dataList value="#{presupuesto.historial_presupuesto}" var="p"
					lazy="true" type="unordered" itemType="none" pageLinks="5"
					styleClass="p-mt-4 p-mb-4" paginator="true" rows="5"
					rowsPerPageTemplate="5,10,20"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} 
									   {PreviousPageLink} {PageLinks} 
									   {NextPageLink} {LastPageLink} 
									   {RowsPerPageDropdown}">

					<h:panelGroup layout="block"
						styleClass="p-d-flex p-jc-between p-ac-center p-ai-center">

						<h:panelGroup layout="block"
							styleClass="sofia-container-img-small p-ml-2"
							style="width:60px; heigth:60px; border-radius:none">
							<h:graphicImage library="img"
								styleClass="sofia-container-img-small-img"
								name="#{p.venta == null ? 'product.png' : 'car.png'}" />
						</h:panelGroup>


						<h:panelGroup layout="block" styleClass="p-ml-3 p-p-3"
							style="width:80%">
							<h:outputLabel value="#{p.descripcion}" />
						</h:panelGroup>

						<p:commandButton value="#{p.estado ? 'Activo': 'Bloqueado'}" action="#{presupuesto.modificarEstado()}"
							styleClass="#{p.estado ? 'sofia-statu-succes': 'sofia-statu-error'} sofia-statu p-mr-3"
							update="@(.sofia-container-main-update)">
							<f:param name="id-presupuesto" value="#{p.id}"/>
						</p:commandButton>
					</h:panelGroup>

					<h:panelGroup layout="block"
						styleClass="p-d-flex p-jc-between p-ac-center">
						<h:outputLabel value="ID: #{p.id}"
							styleClass="p-ml-3 p-mb-3 sofia-statu sofia-statu-succes"
							style="font-size:0.8em" />
						<h:outputLabel
							value="#{p.venta == null ? p.compra.fechaRegistro : p.venta.fechaRegistro}"
							styleClass="p-mr-3 p-mb-3" style="font-size:0.8em" />
					</h:panelGroup>

					<p:separator></p:separator>
				</p:dataList>
			</h:panelGroup>
		</p:fieldset>
	</ui:define>
</ui:composition>