
<!--          -->
<!-- TEMPLATE -->
<!--          -->
<ui:composition template="template/template.xhtml"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

	<!--      -->
	<!-- HEAD -->
	<!--      -->
	<ui:define name="title"> | Pedido</ui:define>

	<!--        -->
	<!-- NAVBAR -->
	<!--        -->
	<ui:define name="menu-top">
		<p:commandLink value="Conocenos"
			action="/faces/know-us?faces-redirect=true" />
	</ui:define>

	<!--  -->
	<ui:define name="component">
		<h:form>
			<p:growl showDetail="true"></p:growl>
			<h:panelGroup layout="block" styleClass="sofia-container-know-main">
				<!--      -->
				<!-- DATE -->
				<!--      -->
				<p:fieldset legend="Estado Venta" toggleable="true"
					toggleSpeed="500">

					<h:panelGroup layout="block"
						styleClass="ui-fluid p-formgrid p-d-flex p-jc-between p-ac-center">
						
						<!--    -->
						<!-- ID -->
						<!--    -->
						<h:panelGroup layout="block" styleClass="p-field p-col p-md-4">
							<p:outputLabel for="id-estadoVenta" value="id Venta" />
							<p:inputText id="id-estadoVenta" required="true"
								requiredMessage="El campo id Venta no puede estar vacia."
								value="#{estadoVenta.id}" />
						</h:panelGroup>
					</h:panelGroup>

					<!--        -->
					<!-- BUTTON -->
					<!--        -->
					<p:separator styleClass="p-mt-3 p-mb-3" />
					<h:panelGroup layout="block"
						styleClass="p-d-flex p-jc-between p-ac-center p-mb-3">
						<p:commandButton update="@(.sofia-container-main-template)"
							styleClass="sofia-button-succes" icon="fa fa-fw fa-search"
							action="#{estadoVenta.consultarEstadoVenta}" value="Consultar" />
						<p:commandButton update="@(.sofia-container-main-template)"
							styleClass="sofia-button-warn" icon="fa fa-fw fa-brush"
							disabled="#{fn:length(estadoVenta.detalleCompraVenta_filter) gt 0 ? 'false' : 'true'}"
							action="#{estadoVenta.limpiarFiltroEstadoVenta()}" value="Limpiar" />						
					</h:panelGroup>
					<p:separator styleClass="p-mt-3 p-mb-3" />
				</p:fieldset>

				<!--           -->
				<!-- DATA VIEW -->
				<!--           -->
				<p:dataTable
					rendered="#{estadoVenta.estadoVenta.ventaEstadoVenta.detalleCompraVentas.size()>0}"
					var="p"
					value="#{estadoVenta.estadoVenta.ventaEstadoVenta.detalleCompraVentas}"
					widgetVar="sofia-table-update" id="sofia-table-update"
					emptyMessage="No se encontro ningun detalle de venta"
					filteredValue="#{estadoVenta.detalleCompraVenta_filter}"
					paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink}
										   {PreviousPageLink} {CurrentPageReport} 
										   {NextPageLink} {LastPageLink}"
					paginator="true" rows="20" rowIndexVar="index"
					rowsPerPageTemplate="5,10,15,20,50,100" reflow="true"
					scrollable="true" styleClass="p-mt-4">

					<!-- HEADER -->
					<f:facet name="header">
						<p:outputPanel layout="block"
							styleClass="p-d-flex p-jc-end p-ac-center">
							<h:outputText value="Buscar:" styleClass="p-mt-1 p-mr-2" />
							<p:inputText id="globalFilter"
								onkeyup="PF('sofia-table-update').filter()" />
						</p:outputPanel>
						<p:outputPanel layout="block"
							styleClass="p-d-flex p-jc-center p-ac-center p-p-3">
							<h2> Estado de Venta </h2>
							<h4 class="p-as-end">( ID: #{ estadoVenta.estadoVenta.venta} )</h4>
						</p:outputPanel>
						<p:inputTextarea value="#{estadoVenta.estadoVenta.descripcion}"></p:inputTextarea>
					</f:facet>

					<!--        -->
					<!-- COLUMN -->
					<!--        -->
					<p:column style="width:50px">
						<h:panelGroup layout="block"
							styleClass="p-d-flex p-jc-center p-ac-center">
							<h:outputLabel value="#{index + 1}" />
						</h:panelGroup>
					</p:column>

					<!-- PRODUCTO -->
					<p:column filterBy="#{p.detalleProducto.productoBean.nombre}"
						sortBy="#{p.detalleProducto.productoBean.nombre}"
						footerText="Producto" filterMatchMode="contains">
						<f:facet name="header">
							<h:outputText value="Producto" />
						</f:facet>
						<h:panelGroup layout="block"
							styleClass="p-d-flex p-jc-center p-ac-center">
							<h:outputText value="#{p.detalleProducto.productoBean.nombre}" />
						</h:panelGroup>
					</p:column>

					<!-- CANTIDAD -->
					<p:column filterBy="#{p.cantidad}" footerText="Cantidad"
						sortBy="#{p.cantidad}" filterMatchMode="contains">
						<f:facet name="header">
							<h:outputText value="Cantidad" />
						</f:facet>
						<h:panelGroup layout="block"
							styleClass="p-d-flex p-jc-center p-ac-center">
							<h:outputText value="#{p.cantidad}" />
						</h:panelGroup>
					</p:column>

					<!-- SUBTOTAL -->
					<p:column filterBy="#{p.subtotal}" footerText="SubTotal"
						sortBy="#{p.subtotal}" filterMatchMode="contains">
						<f:facet name="header">
							<h:outputText value="SubTotal" />
						</f:facet>
						<h:panelGroup layout="block"
							styleClass="p-d-flex p-jc-center p-ac-center">
							<h:outputText value="#{p.subtotal}" />
						</h:panelGroup>
					</p:column>
				</p:dataTable>
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>